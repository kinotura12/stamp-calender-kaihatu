/* role: styles (moved from index.html) */

    :root{
      --bg:#0f1115;
      --panel:#171a21;
      --text:#e8ecf3;
      --muted:#a9b2c3;
      --card: rgba(255,255,255,.04);
      --card2: rgba(255,255,255,.03);
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --ring: rgba(255,255,255,.16);

      --pink:#ff6fae;
      --orange:#ff9a4a;
      --yellow:#ffd55a;
      --green:#6ee38b;
      --blue:#62c7ff;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", sans-serif;
      background: radial-gradient(1100px 700px at 20% 0%, #1a2040 0%, var(--bg) 60%);
      color: var(--text);
      -webkit-tap-highlight-color: transparent;
    }

    header{
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(10px);
      background: rgba(15,17,21,.65);
      border-bottom: 1px solid rgba(255,255,255,.06);
    }

    .wrap{
      max-width: 820px;
      margin: 0 auto;
      padding: 14px 14px 40px;
    }

    .titleRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 10px 0 8px;
    }

    .monthNav{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 0;
    }

    .navBtn{
      width: 36px;
      height: 34px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 16px;
      line-height: 1;
    }
    .navBtn:active{ transform: translateY(1px); }
    .navBtn[disabled]{ opacity: .35; cursor: default; transform:none; }

    h1{
      margin:0;
      font-size: 18px;
      letter-spacing: .02em;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .sub{
      font-size: 12px;
      color: var(--muted);
      margin-top: 2px;
    }

    .rightBar{
      display:flex;
      gap:8px;
      align-items:center;
      flex: 0 0 auto;
    }

    /* ハンバーガー */
    .hamburger{
      width: 38px;
      height: 34px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 4px;
      cursor:pointer;
    }
    .hamburger span{
      width: 16px;
      height: 2px;
      background: rgba(255,255,255,.75);
      border-radius: 2px;
    }
    .hamburger:active{ transform: translateY(1px); }

    /* ===== calendar header row (dow) ===== */
    .dow{
      display:grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      margin-top: 10px;
      padding: 10px 10px 0;
      color: var(--muted);
      font-size: 12px;
      text-align:center;
    }

    .grid{
      background: var(--card);
      border: 1px solid rgba(255,255,255,.06);
      border-radius: 16px;
      padding: 10px;
      margin-top: 8px;
      box-shadow: var(--shadow);
    }

    .days{
      display:grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      padding: 10px 0 0;
    }

    /* ===== calendar cell ===== */
    .cell{
      position: relative;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.06);
      background: var(--card2);
      padding: 8px;
      cursor: pointer;
      overflow: hidden;
      user-select: none;
      height: 86px;
    }
    .cell.empty{
      opacity: .25;
      cursor: default;
    }
    .cell.selected{
      outline: 2px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.055);
    }

    .daynum{
      font-size: 12px;
      color: var(--muted);
      line-height: 1;
    }

    .goalPreview{
      margin-top: 6px;
      font-size: 12px;
      font-weight: 800;
      letter-spacing: .01em;
      color: rgba(232,236,243,.92);
      padding-right: 30px;
      display: none;
    }
    .goalPreview.show{
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .goalPreview.empty{
      opacity: .25;
      font-weight: 600;
    }

    /* ===== stamp dot in calendar cell ===== */
    .dot{
      position:absolute;
      right: 8px;
      bottom: 8px;
      width: 20px;
      height: 20px;
      border-radius: 999px;
      border: 2px solid var(--ring);
      background: transparent;
      cursor: pointer;
      transition: transform .08s ease;
    }
    .dot:active{ transform: scale(.95); }
    .dot.filled{ border-color: rgba(255,255,255,.18); box-shadow: 0 8px 18px rgba(0,0,0,.25); }
    .dot.pink{ background: var(--pink); }
    .dot.orange{ background: var(--orange); }
    .dot.yellow{ background: var(--yellow); }
    .dot.green{ background: var(--green); }
    .dot.blue{ background: var(--blue); }

    /* ===== color picker popup (with title) ===== */
    .picker{
      position: fixed;
      z-index: 9999;
      display: none;
      flex-direction: column;
      gap: 10px;
      padding: 10px 12px 12px;
      border-radius: 14px;
      background: rgba(23,26,33,.92);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 16px 40px rgba(0,0,0,.45);
      backdrop-filter: blur(10px);
      min-width: 190px;
    }
    .picker.show{ display:flex; }

    .pickerTitle{
      font-size: 12px;
      color: rgba(232,236,243,.9);
      letter-spacing: .02em;
      display:flex;
      align-items:center;
      gap: 8px;
    }
    .pickerTitle .miniDot{
      width: 10px; height: 10px;
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,.22);
      opacity: .85;
    }

    .pickerRow{
      display:flex;
      gap: 10px;
      justify-content: space-between;
    }

    .pick{
      width: 22px;
      height: 22px;
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,.22);
      box-shadow: 0 10px 22px rgba(0,0,0,.35);
      cursor: pointer;
      transition: transform .08s ease, opacity .12s ease;
    }
    .pick:active{ transform: translateY(1px) scale(.98); }
    .pick.pink{ background: var(--pink); }
    .pick.orange{ background: var(--orange); }
    .pick.yellow{ background: var(--yellow); }
    .pick.green{ background: var(--green); }
    .pick.blue{ background: var(--blue); }

    .caret{
      position: fixed;
      z-index: 9998;
      width: 10px; height: 10px;
      background: rgba(23,26,33,.92);
      border-left: 1px solid rgba(255,255,255,.12);
      border-top: 1px solid rgba(255,255,255,.12);
      transform: rotate(45deg);
      display:none;
      box-shadow: 0 16px 40px rgba(0,0,0,.45);
      backdrop-filter: blur(10px);
    }
    .caret.show{ display:block; }

    /* ===== menu ===== */
    .menuOverlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(4px);
      display:none;
      z-index: 50;
    }
    .menuOverlay.show{ display:block; }

    .menuSheet{
      position: fixed;
      right: 14px;
      top: 74px;
      width: min(340px, calc(100vw - 28px));
      background: rgba(23,26,33,.92);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      box-shadow: 0 16px 40px rgba(0,0,0,.45);
      padding: 10px;
      display:none;
      z-index: 60;
    }
    .menuSheet.show{ display:block; }

    .menuItem{
      width: 100%;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 10px 10px;
      border-radius: 12px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.06);
      color: var(--text);
      cursor:pointer;
      font-size: 14px;
      margin-bottom: 8px;
    }
    .menuItem:last-child{ margin-bottom:0; }
    .badge{ font-size: 12px; color: var(--muted); }

    /* ===== buttons ===== */
    .btn{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-radius: 12px;
      padding: 10px 12px;
      font-size: 13px;
      cursor:pointer;
      min-width: 90px;
    }
    .btn:active{ transform: translateY(1px); }
    .btn.danger{
      border-color: rgba(255,140,140,.25);
      background: rgba(255,120,120,.12);
    }

    /* ===== diary + customize wrapper (slide) ===== */
    .diaryWrap{
      position: relative;
      margin-top: 12px;
      border-radius: 16px;
    }
    .slider{
      display:flex;
      width: 200%;
      transition: transform .22s ease;
      will-change: transform;
    }
    .slider.customize{ transform: translateX(-50%); }

    .panel{
      width: 50%;
      background: var(--card);
      border: 1px solid rgba(255,255,255,.06);
      border-radius: 16px;
      padding: 12px;
      box-shadow: var(--shadow);
      display:none;
    }
    .panel.show{ display:block; }

    .diaryHead{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 10px;
    }
    .diaryHeadLeft{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .diaryStamp{
      width: 18px; height: 18px;
      border-radius: 999px;
      border: 2px solid var(--ring);
      background: transparent;
      flex: 0 0 auto;
      cursor: pointer;
      transition: transform .08s ease;
    }
    .diaryStamp:active{ transform: scale(.95); }
    .diaryStamp.filled{ border-color: rgba(255,255,255,.18); box-shadow: 0 8px 18px rgba(0,0,0,.25); }
    .diaryStamp.pink{ background: var(--pink); }
    .diaryStamp.orange{ background: var(--orange); }
    .diaryStamp.yellow{ background: var(--yellow); }
    .diaryStamp.green{ background: var(--green); }
    .diaryStamp.blue{ background: var(--blue); }

    .diaryLabel{ font-size: 12px; color: var(--muted); }
    .diaryDate{ font-size: 16px; font-weight: 700; letter-spacing: .02em; margin-top: 2px; }

    .headBtns{
      display:flex;
      gap: 8px;
      align-items:center;
    }

    .iconBtn{
      width: 38px;
      height: 34px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .iconBtn:active{ transform: translateY(1px); }
    .iconBtn svg{ width: 18px; height: 18px; opacity:.9; }

    .inlineConfirm{
      display:none;
      margin: 6px 0 10px;
      padding: 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
    }
    .inlineConfirm.show{ display:block; }
    .inlineConfirmMsg{
      font-size: 13px;
      color: rgba(232,236,243,.95);
      margin-bottom: 10px;
      line-height: 1.5;
    }
    .inlineConfirmBtns{
      display:flex;
      gap: 10px;
      justify-content:flex-end;
    }

    .section{
      margin-top: 12px;
      padding-top: 10px;
      border-top: 1px solid rgba(255,255,255,.06);
    }
    .section:first-of-type{
      margin-top: 6px;
      padding-top: 0;
      border-top: none;
    }
    .sectionHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 8px;
    }
    .sectionTitle{ font-size: 12px; color: var(--muted); display:flex; align-items:center; gap:8px; }
    .chip{
      font-size: 11px;
      color: rgba(232,236,243,.9);
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      padding: 4px 8px;
      border-radius: 999px;
    }

    input.goal{
      width: 100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: var(--text);
      outline: none;
      font-size: 16px;
    }
    input.goal:focus{ border-color: rgba(255,255,255,.22); }

    .todoList{ display:flex; flex-direction:column; gap: 8px; }
    .todoRow{
      display:flex;
      align-items:center;
      gap: 10px;
      position: relative;
      padding-right: 34px;
    }
    .todoRow input[type="checkbox"]{
      width: 18px; height: 18px;
      accent-color: rgba(255,255,255,.65);
      flex: 0 0 auto;
    }
    .todoRow input.todoText{
      flex: 1 1 auto;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: var(--text);
      outline: none;
      font-size: 14px;
    }
    .todoRow input.todoText:focus{ border-color: rgba(255,255,255,.22); }

    .todoDel{
      position:absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 28px;
      height: 28px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      display:none;
      cursor:pointer;
    }
    .todoRow.showDel .todoDel{ display:block; }

    textarea.memo{
      width: 100%;
      min-height: 140px;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: var(--text);
      outline: none;
      resize: vertical;
      line-height: 1.5;
      font-size: 14px;
    }
    textarea.memo:focus{ border-color: rgba(255,255,255,.22); }

    .hint{ color: var(--muted); font-size: 12px; margin-top: 10px; line-height: 1.6; }

    /* ===== Mood Widget (Diary) ===== */
    .moodWidget{
      margin-top: 12px;
      padding-top: 10px;
      border-top: 1px solid rgba(255,255,255,.06);
    }
    .moodTitle{
      font-size: 12px;
      color: rgba(232,236,243,.92);
      letter-spacing: .02em;
      margin-bottom: 8px;
      display:flex;
      align-items:center;
      gap: 8px;
    }
    .moodRow{
  display:flex;
  gap: 17px;                 /* スタンプ0.5個分（34pxの半分） */
  align-items:center;
  justify-content: flex-start; /* 左寄せ */
  padding: 8px 0 2px;
    }
    .moodPick{
      width: 34px;
      height: 34px;
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,.22);
      cursor:pointer;
      box-shadow: 0 12px 24px rgba(0,0,0,.35);
      transition: transform .08s ease, opacity .14s ease;
      background: transparent;
    }
    .moodPick:active{ transform: translateY(1px) scale(.98); }
    .moodPick.pink{ background: var(--pink); }
    .moodPick.orange{ background: var(--orange); }
    .moodPick.yellow{ background: var(--yellow); }
    .moodPick.green{ background: var(--green); }
    .moodPick.blue{ background: var(--blue); }
    .moodRow.hasSelection .moodPick{ opacity: .35; }
    .moodRow.hasSelection .moodPick.isSelected{ opacity: 1; outline: 2px solid rgba(255,255,255,.18); }

    /* ===== list ===== */
    .list{
      margin-top: 12px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,.06);
      border-radius: 16px;
      padding: 12px;
      box-shadow: var(--shadow);
      display:none;
    }
    .list.show{ display:block; }

    .listHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 10px;
    }
    .listTitle{ font-size: 14px; color: var(--muted); }

    .listItem{
      border-top: 1px solid rgba(255,255,255,.06);
      padding: 10px 0;
    }
    .listItem:first-of-type{ border-top: none; padding-top: 0; }

    .listItemHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 6px;
    }

    .listLeft{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 0;
    }

    .miniStamp{
      width: 14px; height: 14px;
      border-radius: 999px;
      border: 2px solid var(--ring);
      background: transparent;
      flex: 0 0 auto;
    }
    .miniStamp.filled{ border-color: rgba(255,255,255,.18); }
    .miniStamp.pink{ background: var(--pink); }
    .miniStamp.orange{ background: var(--orange); }
    .miniStamp.yellow{ background: var(--yellow); }
    .miniStamp.green{ background: var(--green); }
    .miniStamp.blue{ background: var(--blue); }

    .listDate{
      font-weight: 700;
      font-size: 14px;
      white-space: nowrap;
    }

    .preview{
      color: rgba(232,236,243,.85);
      font-size: 13px;
      line-height: 1.5;
      opacity: .92;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .muted{ color: var(--muted); }

    /* ===== data ===== */
    .data{
      margin-top: 12px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,.06);
      border-radius: 16px;
      padding: 12px;
      box-shadow: var(--shadow);
      display:none;
    }
    .data.show{ display:block; }

    .majorTitle{
      font-size: 12px;
      color: var(--muted);
      margin: 2px 0 8px;
      letter-spacing: .02em;
    }

    .kvRow{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
      padding: 10px 0;
      border-top: 1px solid rgba(255,255,255,.06);
    }
    .kvRow:first-of-type{ border-top:none; padding-top:0; }

    .kvLeft{
      display:flex;
      flex-direction:column;
      gap: 4px;
      min-width: 0;
    }
    .kvLabel{
      font-size: 13px;
      color: rgba(232,236,243,.92);
    }
    .kvValueBig{
      font-size: 18px;
      font-weight: 800;
      letter-spacing: .02em;
      line-height: 1.2;
      white-space: nowrap;
    }

    .toggleBtn{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-radius: 12px;
      padding: 9px 10px;
      font-size: 13px;
      cursor:pointer;
      white-space: nowrap;
    }
    .toggleBtn:active{ transform: translateY(1px); }

    .monthBreakdown{
      display:none;
      margin-top: 8px;
      padding: 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.14);
    }
    .monthBreakdown.show{ display:block; }

    .monthLine{
      display:flex;
      justify-content:space-between;
      gap: 10px;
      padding: 6px 0;
      border-top: 1px solid rgba(255,255,255,.06);
      font-size: 13px;
      color: rgba(232,236,243,.92);
    }
    .monthLine:first-child{ border-top:none; padding-top:0; }
    .monthLine span:last-child{ color: var(--muted); }

    .minorNote{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.6;
      margin-top: 8px;
    }

    .row{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items:center;
      justify-content:space-between;
      padding: 10px 0;
      border-top: 1px solid rgba(255,255,255,.06);
    }
    .row:first-of-type{ border-top:none; padding-top:0; }
    .rowLabel{
      min-width: 220px;
      font-size: 13px;
      color: rgba(232,236,243,.92);
    }
    .controls{
      display:flex;
      gap: 10px;
      align-items:center;
      flex-wrap: wrap;
      justify-content:flex-end;
    }
    select{
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: var(--text);
      outline: none;
      font-size: 13px;
    }
    input[type="file"]{
      color: var(--muted);
      font-size: 12px;
    }

    .divider{
      margin: 14px 0;
      border-top: 1px solid rgba(255,255,255,.08);
    }

    /* ===== customize panel ===== */
    .customHead{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 10px;
    }
    .customTitle{
      font-size: 16px;
      font-weight: 800;
      letter-spacing: .02em;
    }
    .customSub{
      font-size: 12px;
      color: var(--muted);
      margin-top: 4px;
      line-height: 1.6;
    }

    .blockList{
      display:flex;
      flex-direction:column;
      gap: 10px;
      margin-top: 10px;
    }
    .blockCard{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.14);
      padding: 10px;
    }
    .blockTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .blockName{
      display:flex;
      align-items:center;
      gap: 8px;
      min-width: 0;
    }
    .blockName strong{
      font-size: 13px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display:block;
      max-width: 240px;
    }
    .lockTag{
      font-size: 11px;
      color: rgba(232,236,243,.85);
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      padding: 3px 8px;
      border-radius: 999px;
      white-space: nowrap;
    }

    .blockActions{
      display:flex;
      align-items:center;
      gap: 8px;
    }

    .tinyBtn{
      width: 34px;
      height: 30px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 13px;
    }
    .tinyBtn[disabled]{ opacity: .35; cursor: default; }
    .tinyBtn:active{ transform: translateY(1px); }

    .blockBottom{
      margin-top: 8px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .switch{
      display:flex;
      align-items:center;
      gap: 8px;
      color: rgba(232,236,243,.92);
      font-size: 12px;
    }
    .switch input{ width: 18px; height: 18px; }

    .renameRow{
      display:none;
      margin-top: 10px;
      gap: 10px;
      align-items:center;
    }
    .renameRow.show{ display:flex; }
    .renameRow input{
      flex: 1 1 auto;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: var(--text);
      outline:none;
      font-size: 13px;
    }

    .customFooter{
      margin-top: 14px;
      display:flex;
      gap: 10px;
      justify-content: space-between;
      align-items:center;
    }
    .ghostBtn{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.02);
      color: var(--text);
      border-radius: 12px;
      padding: 10px 12px;
      font-size: 13px;
      cursor:pointer;
      min-width: 120px;
    }
    .ghostBtn:active{ transform: translateY(1px); }

    /* ===== view mode helpers ===== */
    .hidden { display: none !important; }

    /* ===== responsive ===== */
    @media (max-width: 640px){
      .wrap{ padding-bottom: 22px; }
      .dow{ padding: 8px 8px 0; gap: 6px; }
      .grid{ padding: 8px; }
      .days{ gap: 6px; padding-top: 8px; }

      .cell{
        height: auto;
        aspect-ratio: 1 / 1.07;
        padding: 7px;
      }
      .dot{ width: 18px; height: 18px; right: 7px; bottom: 7px; }

      .grid.calendarPanel{ max-height: 72vh; }
      .moodPick{ width: 32px; height: 32px; }
    }

    @media (min-width: 760px){
      .goalPreview{ display:none; }
      .goalPreview.show{ display:-webkit-box; }
      .cell{ height: 96px; }
    }
  